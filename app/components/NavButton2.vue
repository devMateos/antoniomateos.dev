<!-- eslint-disable vue/multi-word-component-names -->
<template>
  <component
    :is="componentType"
    :to="to"
    :href="href"
    :download="download"
    class="nav-button"
    :class="{ 'nav-button--active': isActive }"
  >
    <svg
      class="nav-button__svg"
      viewBox="0 0 110 15"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M2 8.39036C2.07356 7.28653 2.17546 6.33747 2.69173 5.31578C2.83855 5.02521 3.12856 4.50833 3.49413 4.35812C4.15882 4.085 4.85416 3.44245 5.63386 3.40047C5.85222 3.38871 6.02554 3.26102 6.23336 3.22046C6.50808 3.16684 6.84805 3.20336 7.12799 3.20605C7.68372 3.21141 8.11856 3.29031 8.60367 3.47967C9.17477 3.7026 9.61424 4.23428 9.78422 4.68214C10.278 5.98314 10.6731 7.36344 10.9002 8.72878C11.0805 9.81249 11.6813 10.684 12.4589 11.5802C12.9227 12.1147 13.2249 12.3601 13.953 12.6674C14.6099 12.9446 15.6407 12.8708 16.2772 12.5738C16.9026 12.282 17.3683 11.9399 17.7898 11.4865C18.1449 11.1045 18.6225 10.7751 18.9519 10.3849C19.5808 9.63993 20.3778 8.98572 20.7135 8.11675C20.9804 7.42578 21.1112 6.75405 21.3406 6.05742C21.4662 5.67618 21.5204 5.28396 21.6542 4.90536C21.7526 4.62692 21.7769 4.21381 22.0047 3.9837C22.1833 3.80322 22.2493 3.54786 22.4013 3.35006C22.5706 3.12976 22.8232 2.97602 22.9823 2.75243C23.2974 2.30974 23.8835 2.25057 24.4303 2.14039C25.332 1.95873 27.1714 1.83834 27.8152 2.53642C29.2367 4.07772 29.394 6.03275 29.563 7.87913C29.5988 8.2713 29.7416 8.71019 29.8443 9.0996C29.9411 9.46672 30.0146 9.80361 30.1394 10.1689C30.3311 10.73 30.6739 11.4646 31.2185 11.8898C31.4615 12.0795 31.9738 12.2287 32.3022 12.2714C32.9832 12.36 34.043 12.3574 34.7002 12.1778C35.9423 11.8384 37.013 10.8849 37.527 9.97086C37.8609 9.37707 38.1967 8.82656 38.3986 8.19595C38.6202 7.50388 38.6891 6.7833 38.6891 6.07182C38.6891 5.66721 38.7044 5.28876 38.7675 4.89456C38.8283 4.51502 39.1237 4.142 39.2702 3.77489C39.5141 3.16336 40.1744 2.2298 41.0502 2.05399C41.9289 1.87759 43.0864 2.34518 43.688 2.83163C44.6939 3.645 45.1356 4.91684 45.3297 5.99262C45.4751 6.79888 45.6429 7.61018 45.8277 8.41196C45.9293 8.85266 45.9571 9.29135 46.1598 9.70084C46.5873 10.5649 46.8237 11.4699 47.7184 12.0986C47.9207 12.2407 48.0755 12.4526 48.3179 12.5522C48.7331 12.7228 49.4352 12.5291 49.8582 12.473C51.2644 12.2866 52.5904 11.1211 53.1323 10.1473C53.8147 8.92095 54.0348 7.54826 54.4143 6.25544C54.577 5.70118 54.7296 5.16104 54.8755 4.60294C54.9636 4.26587 55.0702 3.93193 55.2905 3.63088C55.4243 3.44816 56.0376 3.15855 56.282 3.05125C56.6844 2.87455 57.5582 2.98728 57.9929 3.01884C58.6722 3.06818 59.1985 3.37707 59.7683 3.62728C60.0479 3.75005 60.1039 3.65968 60.4001 3.65968C61.3993 3.65968 61.888 4.62558 62.1478 5.21857C62.4089 5.81428 62.6763 6.37759 62.8396 7.00428C62.984 7.55861 63.0027 8.13293 63.1347 8.68918C63.2715 9.26577 63.2843 9.85426 63.4252 10.4317C63.537 10.8898 63.7746 11.3753 63.9694 11.8178C64.1499 12.2278 64.9984 12.4481 65.4266 12.671C65.7582 12.8436 66.2973 13.0606 66.7132 12.9842C67.3992 12.8582 68.0656 12.2973 68.6085 11.9582C69.2445 11.561 69.6975 10.9591 69.9828 10.3777C70.2529 9.82711 70.3091 9.35554 70.4393 8.78639C70.5242 8.41526 70.4808 8.02454 70.4808 7.64872C70.4808 6.95874 70.7037 6.29089 70.8082 5.611C70.8893 5.08342 71.1135 4.60491 71.2187 4.09171C71.2943 3.72283 71.6846 3.43992 72.0211 3.17725C73.2556 2.21341 75.3895 2.21128 76.9876 2.46081C78.4292 2.68589 79.068 3.95681 79.4779 4.94136C79.9884 6.16777 80.3587 7.46181 80.3587 8.75398C80.3587 9.5781 80.3603 10.6734 81.0273 11.3677C81.3759 11.7306 81.6734 12.172 82.1018 12.473C83.1062 13.1787 85.0296 12.5804 85.9017 12.0986C87.0705 11.4528 87.3158 10.1558 87.5987 9.11761C87.7307 8.63317 88.0083 8.18428 88.1613 7.70632C88.3247 7.19597 88.4309 6.65461 88.5579 6.13663C88.6923 5.58876 88.6899 4.987 89.0283 4.47333C89.2422 4.14856 89.4064 3.78771 89.72 3.51567C89.9898 3.28165 90.2704 2.99336 90.587 2.78843C91.0504 2.48839 91.5655 2.4841 92.1825 2.44281C93.0475 2.38493 93.7823 2.6416 94.3038 3.20605C95.2041 4.18045 95.5034 5.17965 95.881 6.31664C96.3189 7.63539 96.6234 8.96982 97.1215 10.2661C97.309 10.754 97.9458 10.8693 98.3297 11.2381C98.8505 11.7386 99.8775 11.9922 100.645 11.7926C103.551 11.0364 104.734 7.80713 108 7.80713"
        stroke="var(--color-brown)"
        stroke-width="4"
        stroke-linecap="round"
      />
    </svg>
    <span class="nav-button__text">
      <slot />
    </span>
  </component>
</template>

<script setup lang="ts">
const props = defineProps<{
  to?: string | null;
  href?: string | null;
  download?: boolean;
  isActive?: boolean;
}>();

const componentType = computed(() => {
  if (props.to) return resolveComponent("NuxtLink");
  return "a";
});
</script>

<style scoped>
.nav-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  position: relative;
  width: 100%;
  min-width: 150px;
  height: 64px;
  font-family: var(--font-family-raleway);
  font-size: var(--fs-m);
  font-weight: 700;
  color: var(--color-text);
  text-decoration: none;
  cursor: pointer;
  transition: color var(--transition);
  padding: 0 var(--spacing-m);

  @media (width > 768px) {
    width: auto;
    min-width: 180px;
  }

  &:hover {
    .nav-button__svg path {
      stroke-dashoffset: 0;
    }
  }

  .nav-button__svg {
    position: absolute;
    bottom: 5px;
    z-index: -1;
    pointer-events: none;
    width: clamp(9rem, 8vw, 11rem);
    height: auto;

    & path {
      transition: all 800ms ease-in-out;
      stroke-dasharray: 1200px;
      stroke-dashoffset: 1200px;
    }
  }

  .nav-button__text {
    position: relative;
    z-index: 1;
  }
}
</style>
